// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
"use client";

import React, { useEffect, useState } from "react";

import { useAuthStore } from "@/stores/auth";

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file
// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

// import MainLayout from "../layout";
// import React from "react";
// import Profilelayout from "@/features/account/layout/accountLayout";
// export default function ProfilePage() {
//     return (
//         <div>
//             <Profilelayout />
//         </div>
//     );
// }
// Add this at the very top of the file

const ProfilePage: React.FC = () => {
    const { setToken, token } = useAuthStore();
    console.log(token);

    // Add a check to ensure token is not null or undefined
    // const accessToken = token?.accessToken;

    const [profile, setProfile] = useState<Profile | null>(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState<string | null>(null);

    useEffect(() => {
        // Ensure accessToken exists before making the API call
        if (!token) return;

        const fetchProfile = async () => {
            try {
                const response = await fetch(
                    "http://localhost:8080/api/users/customer-info",
                    {
                        method: "GET",
                        headers: {
                            Authorization: `Bearer ${token}`,
                            "Content-Type": "application/json",
                        },
                    },
                );

                if (!response.ok) {
                    throw new Error("Failed to fetch profile data");
                }

                const data = await response.json();
                setProfile(data);
            } catch (err) {
                setError(err.message);
            } finally {
                setLoading(false);
            }
        };

        fetchProfile();
    }, [token]);

    if (loading) {
        return <p>Đang tải dữ liệu...</p>;
    }

    if (error) {
        return <p>Lỗi: {error}</p>;
    }

    return (
        <div>
            <h1>Thông tin cá nhân</h1>
            {profile && (
                <div>
                    <p>Tên: {profile.fullName}</p>
                    <p>Email: {profile.email}</p>
                    <p>Số điện thoại: {profile.phone}</p>
                    {profile.address && <p>Địa chỉ: {profile.address}</p>}
                </div>
            )}
        </div>
    );
};

export default ProfilePage;
